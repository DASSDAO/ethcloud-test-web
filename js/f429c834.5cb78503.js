(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["f429c834"],{"47b2":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mypage"},[s("TitleBar",{attrs:{titleTx:t.title}}),s("div",{staticClass:"iv-block"},[s("span",{staticClass:"iv-tt-gray",staticStyle:{color:"#333333","margin-top":"10px"}},[t._v(t._s(t.$t("quickbuy"))+":")]),s("div",{staticStyle:{"margin-top":"10px"}},[s("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"1 ETH"},on:{click:function(e){t.buy(1)}}}),s("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"3 ETH"},on:{click:function(e){t.buy(3)}}}),s("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"5 ETH"},on:{click:function(e){t.buy(5)}}}),s("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"10 ETH"},on:{click:function(e){t.buy(10)}}})],1),s("span",{staticClass:"iv-tt-gray",staticStyle:{color:"black","margin-top":"10px"}},[t._v(t._s(t.$t("customamt"))+":")]),s("q-input",{staticClass:"in-in-ma",attrs:{"float-label":t.$t("ivamt"),type:"number"},model:{value:t.toAmt,callback:function(e){t.toAmt=e},expression:"toAmt"}}),t.global.user.hadrefer?t._e():s("q-input",{staticClass:"in-in-ma",attrs:{"float-label":t.$t("fillreferCode")},model:{value:t.refercode,callback:function(e){t.refercode=e},expression:"refercode"}}),s("q-btn",{staticClass:"btn-normal",attrs:{rounded:"",label:t.$t("buyContract"),color:"primary"},on:{click:t.toNext}}),t._e()],1)],1)},o=[];i._withStripped=!0;s("96cf");var n=s("c973"),a=s.n(n),l=(s("f559"),s("9bfb")),r=s("e7ea"),c=(s("a002"),s("96a1")),f=s("f5ef"),h={components:{TitleBar:l["a"]},data:function(){return{currentBalance:this.global.wallet.lastEthbalance,title:this.$t("joininv"),toAddress:"",toAmt:"",investBmobId:"",investAmt:"",lastInverstTime:1e3*parseInt(this.global.user._lastinvestTime),refercode:""}},mounted:function(){this.util.refreshGasPrice(this)},methods:{toInvestReadme:function(){this.$router.push("/withdrawreadme")},toNext:function(){if(console.log("----invest 1"),(new Date).getTime()-this.lastInverstTime<1e3*parseInt(this.global.cmatconfig._investInterval))toast(this.$t("buy24once"));else if(console.log("----invest 2"),this.toAmt>=this.global.bmobconfig.minPerInvest&&this.toAmt<=this.global.bmobconfig.maxPerInvest)if(console.log("----invest 3"),this.toAmt>this.global.wallet.lastEthbalance)toast(this.$t("ethnotenough"));else if(this.global.wallet.lastEthbalance-this.toAmt<.001&&toast(this.$t("gasfeeless")),this.investAmt=this.toAmt,this.global.user.hadrefer)this.showPswdInputDialog();else{if(""===this.refercode)return void toast(this.$t("refercodenull"));this.checkreferCode()}else toast(this.$t("singleinv",{min:this.global.bmobconfig.minPerInvest,max:this.global.bmobconfig.maxPerInvest}))},checkreferCode:function(){this.refercode.startsWith("0x")?toast(this.$t("onlyrefercode")):this.getAddress(this.refercode)},getAddress:function(t){var e=this;e.$q.loading.show({message:this.$t("checking"),spinnerSize:50});var s={code:t};this.$axios.get(this.global.apiconfig.BmobRestAPIUrl+"classes/refercode?where="+encodeURI(JSON.stringify(s)),{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(t){if(console.log(t),200===t.status)if(0===t.data.results.length)e.$q.loading.hide(),toast(e.$t("invalidcode"));else{var s=t.data.results[0].address;if(s===e.global.wallet.ethAddress)return e.$q.loading.hide(),void toast(e.$t("canntrefself"));e.referAddress=s,e._recycleCheckTimes=0,e.recycleReselfCheck(s)}})},recycleReselfCheck:function(t){var e=this,s=this,i=function(){var i=a()(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.global.m3gameContract.refermap(e.global.contractConfig.tokenAddress,t);case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},i,this)}));return function(){return i.apply(this,arguments)}}();i().then(function(t){if(t!==s.global.emptyAddress){if(t.toLowerCase()===s.global.wallet.ethAddress)return s.$q.loading.hide(),void toast(s.$t("recyclereferself"));s._recycleCheckTimes++,s._recycleCheckTimes>s.global.bmobconfig.recycleCheckTimes?(s.$q.loading.hide(),s.showPswdInputDialog()):s.recycleReselfCheck(t.toLowerCase())}else s.$q.loading.hide(),s.showPswdInputDialog()})},buy:function(t){this.toAmt=t},showPswdInputDialog:function(){var t=this,e=this;this.$q.dialog({title:this.itmeName1,message:this.$t("enterpswd"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(s){if(""===s)toast(e.$t("pswdnull"));else{e.$q.loading.show({message:e.$t("txsubmiting"),spinnerSize:50});var i=e.util.getWallet(e,s);t.doInvest(i)}}).catch(function(){})},doInvest:function(t){var e,s,i=this,o=this,n=this.global.m3gameContract.connect(t),a={value:r["ethers"].utils.parseEther(this.investAmt+""),gasPrice:r["ethers"].utils.bigNumberify(this.global.contractConfig.gasprice)};this.global.user.hadrefer?(e=n.investOnce(this.global.contractConfig.tokenAddress,a),s="investOnce"):(e=n.referAndInvestOnce(this.referAddress,this.global.contractConfig.tokenAddress,a),s="referAndInvestOnce"),e.then(function(t){console.log(t),o.$q.loading.hide(),o.util.showInfoDialog(o,t.hash,!0),o.util.listen4TxResult(o,t.hash,o.$t("investsuccess"),o.$t("investfail"),function(){o.lastInverstTime=(new Date).getTime(),f["a"].$emit("investSuccess")})}).catch(function(t){console.error(t),o.util.reprotError2Bmob(o,s,t,i.referAddress+","+i.global.contractConfig.tokenAddress+","+a.value),o.$q.loading.hide()})},itemClick:function(t){switch(t){case 0:"0"!==this.global.bmobconfig.app1url?Object(c["a"])(this.global.bmobconfig.app1url):toast("Coming soon");break;case 1:"0"!==this.global.bmobconfig.app2url?Object(c["a"])(this.global.bmobconfig.app2url):toast("Coming soon");break;case 2:"0"!==this.global.bmobconfig.app3url?Object(c["a"])(this.global.bmobconfig.app3url):toast("Coming soon");break;case 3:"0"!==this.global.bmobconfig.app4url?Object(c["a"])(this.global.bmobconfig.app4url):toast("Coming soon");break}}},beforeDestroy:function(){this.$q.loading.hide()}},u=h,b=(s("fe32"),s("2877")),g=Object(b["a"])(u,i,o,!1,null,"83f1aaa6",null);g.options.__file="Invest.vue";e["default"]=g.exports},"8f5d":function(t,e,s){},"9bfb":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-bar"},[s("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),s("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},o=[];i._withStripped=!0;var n={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},a=n,l=(s("a675"),s("2877")),r=Object(l["a"])(a,i,o,!1,null,null,null);r.options.__file="TitleBar.vue";e["a"]=r.exports},a675:function(t,e,s){"use strict";var i=s("ca51"),o=s.n(i);o.a},ca51:function(t,e,s){},f5ef:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("2b0e"),o=new i["a"]},fe32:function(t,e,s){"use strict";var i=s("8f5d"),o=s.n(i);o.a}}]);